import{N as g}from"./utils-LxBAJ3pI.js";import{_ as I,r as y,m as M,o as T,c as b}from"./index-DuFSmKpI.js";const k={__name:"index",props:{color:{type:String,default:"#5445544D"},font:{type:String,default:"sans-serif"},fontSize:{type:Number,default:240},density:{type:Number,default:6}},setup(w){const t=y(null),n=y(null),r=w;M(async()=>{t.value.width=r.fontSize*8*devicePixelRatio,t.value.height=r.fontSize*2*devicePixelRatio,p()});class _{constructor(){this.r=g.randomInt(2*devicePixelRatio,7*devicePixelRatio);const a=Math.min(t.value.width,t.value.height)/2,s=g.randomInt(0,360)*Math.PI/180,i=t.value.width/2,e=t.value.height/2;this.x=i+a*Math.cos(s),this.y=e+a*Math.sin(s)}draw(){n.value.beginPath(),n.value.arc(this.x,this.y,this.r,0,2*Math.PI),n.value.fillStyle=r.color||"#5445544D",n.value.fill()}moveTo(a,s){const e=this.x,l=this.y,h=(a-e)/500,c=(s-l)/500,v=new Date,d=()=>{const f=Date.now()-v,R=e+h*f,D=l+c*f;if(this.x=R,this.y=D,f>=500){this.x=a,this.y=s;return}requestAnimationFrame(d)};d()}}const u=[],m=()=>n.value.clearRect(0,0,t.value.width,t.value.height),p=()=>{if(t.value){n.value=t.value.getContext("2d",{willReadFrequently:!0}),m(),S();for(let o of u)o.draw();requestAnimationFrame(p)}};let x;const S=()=>{const o=new Date().format("HH:mm:ss");if(o===x)return;x=o;const{width:a,height:s}=t.value;n.value.fillStyle="#000",n.value.textBaseline="middle",n.value.font=`${r.fontSize*devicePixelRatio}px 'DS-Digital', ${r.font}`,n.value.textAlign="center",n.value.fillText(o,a/2,s/2);const i=P();m();for(let e=0;e<i.length;e++){const[l,h]=i[e];let c=u[e];c||(c=new _,u.push(c)),c.moveTo(l,h)}i.length<u.length&&u.splice(i.length)},P=()=>{const o=[],{data:a}=n.value.getImageData(0,0,t.value.width,t.value.height),s=r.density;for(let i=0;i<t.value.width;i+=s)for(let e=0;e<t.value.height;e+=s){const l=(i+e*t.value.width)*4,h=a[l],c=a[l+1],v=a[l+2],d=a[l+3];h===0&&c===0&&v===0&&d===255&&o.push([i,e])}return o};return(o,a)=>(T(),b("canvas",{ref_key:"canvasRef",ref:t},null,512))}},q=I(k,[["__scopeId","data-v-7a62be6a"]]);export{q as default};
